<!DOCTYPE html>
<html lang="en">

<head>
    

    
    

    
    
    
    

    
    

    <title>Audacity with AAC Support on Linux - Ray Riga</title>

    <!-- Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta name="title" content="Audacity with AAC Support on Linux - Ray Riga" />
    <meta name="description" content="" />
    <meta name="keywords" content="Python, SQL, Audio, Ranked Choice, Semantic Merge Conflicts, LiveView, Elixir, Phoenix, Data Engineering" />

    <!-- Favicon -->
    <link rel="apple-touch-icon-precomposed"
        sizes="57x57" href="favicon-apple-touch-114.png">

    <link rel="apple-touch-icon-precomposed"
        sizes="114x114" href="favicon-apple-touch-114.png">

    <link rel="apple-touch-icon-precomposed"
        sizes="72x72" href="favicon-apple-touch-144.png">

    <link rel="apple-touch-icon-precomposed"
        sizes="144x144" href="favicon-apple-touch-144.png">

    <link rel="icon" type="image/vnd.microsoft.icon"
        sizes="32x32 48x48" href="favicon.ico">

    <link rel="icon" sizes="128x128" href="favicon.icns">

    <link rel="icon" href="favicon.png" type="image/x-icon">

    <link rel="icon" type="image/png" sizes="16x16" href="https://rayriga.com/favicons/favicon-16x16.png?h=c5f8a0e9a12e9b7c763f">

    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">

    <!-- Open Graph Protocol -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https:&#x2F;&#x2F;rayriga.com&#x2F;blog&#x2F;audacity-with-aac-support-ubuntu-linux&#x2F;" />
    <meta property="og:title" content="Audacity with AAC Support on Linux - Ray Riga" />
    <meta property="og:description" content="" />
    <meta property="og:image" content="https://rayriga.com/imgs/og_img.png?h=192f8b4f81959b7bd101" />

    <link rel="alternate" type="application/rss+xml" title="RSS feed" href="https://rayriga.com/rss.xml" />

    <!-- Stylesheets -->
    <link href="https://rayriga.com/styles/main.css?h=d0a54e6c785a02955710" rel="stylesheet" type="text/css" />

    <!-- Plausible Analytics -->
    <script defer data-domain="rayriga.com" src="https://plausible-fb9lc-u1102.vm.elestio.app/js/script.js"></script>

    
    
</head>

<body>
    <div class="antialiased dark:bg-gray-100 dark:text-gray-800">
        <div class="flex flex-col min-h-screen space-y-12">
            <header class="container flex items-center justify-between w-full max-w-3xl px-6 py-10 mx-auto xl:max-w-5xl">
                <a rel="noopener noreferrer" href="/" class="block h-6 text-5xl font-extrabold">RAY RIGA</a>
            </header>
            <main class="container flex-1 max-w-3xl px-6 mx-auto space-y-12 xl:max-w-5xl">
                
<div class="markdown">
	<h1 class="title">
	  Audacity with AAC Support on Linux
	</h1>
	<p class="subtitle"><strong>2023-12-29</strong></p>
	<p><strong>UPDATE 2024-10-11:</strong> My audio workstation was recently upgraded from Linux Mint 21 to 22 (equivalent to an upgrade from Ubuntu 22.04 to 24.04).</p>
<p>Using the AppImage version of Audacity as per the approach described below didn't work for AAC export (couldn't find the proper lib). The solution <a href="https://forum.audacityteam.org/t/libavformat-so-no-longer-found-after-upgrade/107269/1">here</a> on how to to install Audacity with AAC export support for Ubuntu 24.04-like systems couldn't be simpler:</p>
<pre><code>sudo apt install audacity
</code></pre>
<p>...and that's it. LOL. Below is everything that was required to get it working in Ubuntu 22.04-like systems.</p>
<hr />
<h2 id="the-story">The Story</h2>
<p>I recently had the good fortune of becoming part of the team at <a href="https://www.radiofreemontclair.org">Radio Free Montclair</a> (RFM) and have decided to come out of &quot;DJ retirement&quot; to start a new show. These days I prefer to use FOSS (Free Open Source Software) to do my internet radio DJing, and I use <a href="https://mixxx.org">Mixxx</a> for actual DJing and <a href="https://www.audacityteam.org">Audacity</a> for post-production.</p>
<p>RFM uses an internet-radio-station-as-a-service platform called <a href="https://radio.co/">Radio.co</a> under the hood. This platform accepts two file formats: MP3 and AAC. The latter is the higher quality option among the two, and being in the paradoxical postion of an audiophile internet radio DJ, my goal is to cram as much quality as possible into bitrate-limited audio streams. So, AAC is my format of choice.</p>
<p>However, AAC is a &quot;non-free&quot; (i.e. proprietary) format, so the stock Audacity available as a pre-built binary application does not include support for this format. I was able to do a custom build of some underlying software called <code>ffmpeg</code> to add AAC support to it, and this has allowed me to export in this format for my radio show!</p>
<p>Doing so turned out to be non-trivial, so I'm writing this post in the hopes that it may help you as well. Are you a technologically adventurous internet radio DJ? I encourage you to take this same approach.</p>
<p>I started with the official custom build instructions for Ubuntu-like systems available <a href="https://trac.ffmpeg.org/wiki/CompilationGuide/Ubuntu">here</a> and had to make a tweak based on this <a href="https://stackoverflow.com/a/36745455">SO answer</a> to enable Audacity integration. </p>
<p>Here are the commands as tweaked, that allowed me to successfully export AAC from Audacity on an Ubuntu-like system.</p>
<h2 id="installing-dependencies">Installing Dependencies</h2>
<pre><code>sudo apt-get update -qq &amp;&amp; sudo apt-get -y install \
  autoconf \
  automake \
  build-essential \
  cmake \
  git-core \
  libass-dev \
  libfreetype6-dev \
  libgnutls28-dev \
  libmp3lame-dev \
  libsdl2-dev \
  libtool \
  libva-dev \
  libvdpau-dev \
  libvorbis-dev \
  libxcb1-dev \
  libxcb-shm0-dev \
  libxcb-xfixes0-dev \
  meson \
  ninja-build \
  pkg-config \
  texinfo \
  wget \
  yasm \
  zlib1g-dev \
  libunistring-dev \ 
  libaom-dev \
  libdav1d-dev
</code></pre>
<h2 id="building-ffmpeg-with-aac-support">Building <code>ffmpeg</code> with AAC Support</h2>
<pre><code>mkdir -p ~&#x2F;ffmpeg_sources ~&#x2F;bin &amp;&amp; \
cd ~&#x2F;ffmpeg_sources &amp;&amp; \
wget -O ffmpeg-snapshot.tar.bz2 https:&#x2F;&#x2F;ffmpeg.org&#x2F;releases&#x2F;ffmpeg-snapshot.tar.bz2 &amp;&amp; \
tar xjvf ffmpeg-snapshot.tar.bz2 &amp;&amp; \
cd ffmpeg &amp;&amp; \
PATH=&quot;$HOME&#x2F;bin:$PATH&quot; PKG_CONFIG_PATH=&quot;$HOME&#x2F;ffmpeg_build&#x2F;lib&#x2F;pkgconfig&quot; .&#x2F;configure \
  --prefix=&quot;$HOME&#x2F;ffmpeg_build&quot; \
  --pkg-config-flags=&quot;--static&quot; \
  --extra-cflags=&quot;-I$HOME&#x2F;ffmpeg_build&#x2F;include&quot; \
  --extra-ldflags=&quot;-L$HOME&#x2F;ffmpeg_build&#x2F;lib&quot; \
  --extra-libs=&quot;-lpthread -lm&quot; \
  --ld=&quot;g++&quot; \
  --bindir=&quot;$HOME&#x2F;bin&quot; \
  --enable-shared \
  --disable-static \
  --enable-gpl \
  --enable-gnutls \
  --enable-libass \
  --enable-libfdk-aac \
  --enable-libfreetype \
  --enable-libmp3lame \
  --enable-libopus \
  --enable-libdav1d \
  --enable-libvorbis \
  --enable-libvpx \
  --enable-libx264 \
  --enable-libx265 \
  --enable-nonfree &amp;&amp; \
PATH=&quot;$HOME&#x2F;bin:$PATH&quot; make -j$(nproc) &amp;&amp; \
make -j$(nproc) install &amp;&amp; \
hash -r
</code></pre>
<h2 id="finishing-up">Finishing Up</h2>
<p>Now you have a custom <code>ffmpeg</code> build along with the necessary source files in your home directory. </p>
<p>From here, I strongly recommend using the AppImage of Audacity to get this working (available from the Audacity website linked above). Download and run the AppImage, then go to <code>Edit&gt;Preferences&gt;Libraries</code>. Here, click on the &quot;Locate&quot; button and it will request that you choose the location of a file associated with <code>ffmpeg</code> which is called <code>libavformat.so</code>. After doing the custom build with the tweaks described above, this file should be located at <code>~/ffmpeg_sources/ffmpeg/libavformat/libavformat.so</code> so input that location, and from there AAC support should be enabled. </p>
<p>That about wraps it up. Happy exporting! </p>

</div>

            </main>
            <footer class="container flex flex-col items-center max-w-3xl px-6 mx-auto xl:max-w-5xl">
                <div class="flex mb-3 space-x-4">
                    <a target="_blank" rel="noopener noreferrer" href="https://github.com/rayrrr" class="text-sm">
                        <span class="sr-only">github</span>
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 fill-current dark:text-sky-600">
                            <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path>
                        </svg>
                    </a>
                    <a target="_blank" rel="noopener noreferrer" href="https://facebook.com/rayriga" class="text-sm">
                        <span class="sr-only">facebook</span>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-6 h-6 fill-current dark:text-sky-600">
                            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path>
                        </svg>
                    </a>
                    <a target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/rayriga" class="text-sm">
                        <span class="sr-only">linkedin</span>
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 fill-current dark:text-sky-600">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path>
                        </svg>
                    </a>
                </div>
            </footer>
        </div>
    </div>
</body>

</html>
